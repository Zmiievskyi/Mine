<div class="min-h-screen bg-[var(--gcore-bg)] py-8 px-4">
  <div class="max-w-3xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-heading font-bold text-[var(--gcore-text)] mb-2">
        KYC Verification
      </h1>
      <p class="text-gray-600">
        Complete your identity verification to unlock all features. We provide a clear checklist of required documentation to streamline the process.
      </p>
    </div>

    <!-- Document Checklist Info -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
      <h3 class="text-sm font-semibold text-blue-900 mb-2">Required Documentation</h3>
      <ul class="text-sm text-blue-800 space-y-1">
        <li class="flex items-center gap-2">
          <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Personal information (name, email, address)
        </li>
        <li class="flex items-center gap-2">
          <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Proof of residency (utility bill, bank statement, or government document — max 3 months old)
        </li>
        <li class="flex items-center gap-2">
          <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Company details (if registering as a company)
        </li>
      </ul>
    </div>

    <!-- Error Alert -->
    @if (error()) {
      <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
        <p class="text-sm text-red-800">{{ error() }}</p>
      </div>
    }

    <!-- Form -->
    <form (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Personal Information Card -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <h2 class="text-xl font-heading font-semibold text-[var(--gcore-text)] mb-4">
          Personal Information
        </h2>
        <div class="space-y-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label hlmLabel for="firstName" class="mb-2 block">
                First Name <span class="text-red-500">*</span>
              </label>
              <input
                hlmInput
                id="firstName"
                type="text"
                [(ngModel)]="firstName"
                name="firstName"
                placeholder="John"
                required
                class="w-full"
              />
            </div>
            <div>
              <label hlmLabel for="lastName" class="mb-2 block">
                Last Name <span class="text-red-500">*</span>
              </label>
              <input
                hlmInput
                id="lastName"
                type="text"
                [(ngModel)]="lastName"
                name="lastName"
                placeholder="Doe"
                required
                class="w-full"
              />
            </div>
          </div>

          <div>
            <label hlmLabel for="email" class="mb-2 block">
              Email <span class="text-red-500">*</span>
            </label>
            <input
              hlmInput
              id="email"
              type="email"
              [(ngModel)]="email"
              name="email"
              placeholder="john.doe@example.com"
              required
              readonly
              class="w-full bg-gray-50"
            />
            <p class="text-xs text-gray-500 mt-1">Email is pre-filled from your account</p>
          </div>
        </div>
      </div>

      <!-- Account Type Card -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <h2 class="text-xl font-heading font-semibold text-[var(--gcore-text)] mb-4">
          Account Type
        </h2>
        <div class="flex gap-4">
          <label class="flex items-center cursor-pointer">
            <input
              type="radio"
              name="accountType"
              value="individual"
              [checked]="accountType() === 'individual'"
              (change)="onAccountTypeChange('individual')"
              class="w-4 h-4 text-[var(--gcore-primary)] border-gray-300 focus:ring-[var(--gcore-primary)]"
            />
            <span class="ml-2 text-sm text-gray-700">Individual</span>
          </label>
          <label class="flex items-center cursor-pointer">
            <input
              type="radio"
              name="accountType"
              value="company"
              [checked]="accountType() === 'company'"
              (change)="onAccountTypeChange('company')"
              class="w-4 h-4 text-[var(--gcore-primary)] border-gray-300 focus:ring-[var(--gcore-primary)]"
            />
            <span class="ml-2 text-sm text-gray-700">Company</span>
          </label>
        </div>
      </div>

      <!-- Company Details Card (only shown for company account type) -->
      @if (isCompanyAccount()) {
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <h2 class="text-xl font-heading font-semibold text-[var(--gcore-text)] mb-4">
            Company Details
          </h2>
          <div class="space-y-4">
            <div>
              <label hlmLabel for="companyName" class="mb-2 block">
                Company Registration Name <span class="text-red-500">*</span>
              </label>
              <input
                hlmInput
                id="companyName"
                type="text"
                [(ngModel)]="companyName"
                name="companyName"
                placeholder="Acme Corporation Ltd."
                required
                class="w-full"
              />
            </div>

            <div>
              <label hlmLabel for="companyAddress" class="mb-2 block">
                Company Registration Address <span class="text-red-500">*</span>
              </label>
              <textarea
                hlmInput
                id="companyAddress"
                [(ngModel)]="companyAddress"
                name="companyAddress"
                placeholder="123 Business St, City, Country, Postal Code"
                required
                rows="3"
                class="w-full"
              ></textarea>
            </div>

            <div>
              <label hlmLabel for="companyRegistrationNumber" class="mb-2 block">
                Company Registration Number <span class="text-red-500">*</span>
              </label>
              <input
                hlmInput
                id="companyRegistrationNumber"
                type="text"
                [(ngModel)]="companyRegistrationNumber"
                name="companyRegistrationNumber"
                placeholder="12345678"
                required
                class="w-full"
              />
            </div>

            <div>
              <label hlmLabel for="companyVatNumber" class="mb-2 block">
                Company EU VAT Number (Optional)
              </label>
              <input
                hlmInput
                id="companyVatNumber"
                type="text"
                [(ngModel)]="companyVatNumber"
                name="companyVatNumber"
                placeholder="EU123456789"
                class="w-full"
              />
            </div>

            <div>
              <label hlmLabel for="companyRepresentativeName" class="mb-2 block">
                Company Representative Full Name (Optional)
              </label>
              <input
                hlmInput
                id="companyRepresentativeName"
                type="text"
                [(ngModel)]="companyRepresentativeName"
                name="companyRepresentativeName"
                placeholder="Leave empty if you represent the company"
                class="w-full"
              />
            </div>

            <div>
              <label hlmLabel for="hasParentCompanyAbroad" class="mb-2 block">
                Does company have HQ/parent outside country of registration? <span class="text-red-500">*</span>
              </label>
              <select
                hlmInput
                id="hasParentCompanyAbroad"
                [(ngModel)]="hasParentCompanyAbroad"
                name="hasParentCompanyAbroad"
                required
                class="w-full"
                (change)="onParentCompanyChange($any($event.target).value)"
              >
                <option value="">Select option</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
              </select>
            </div>
          </div>
        </div>
      }

      <!-- Residence Card -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <h2 class="text-xl font-heading font-semibold text-[var(--gcore-text)] mb-4">
          Residence Information
        </h2>
        <div class="space-y-4">
          <div>
            <label hlmLabel for="countryOfResidence" class="mb-2 block">
              Country of Residence <span class="text-red-500">*</span>
            </label>
            <input
              hlmInput
              id="countryOfResidence"
              type="text"
              [(ngModel)]="countryOfResidence"
              name="countryOfResidence"
              placeholder="United States"
              required
              class="w-full"
            />
          </div>

          <div>
            <label hlmLabel for="address" class="mb-2 block">
              Full Address Including Postal Code <span class="text-red-500">*</span>
            </label>
            <textarea
              hlmInput
              id="address"
              [(ngModel)]="address"
              name="address"
              placeholder="123 Main St, Apartment 4B, New York, NY 10001"
              required
              rows="3"
              class="w-full"
            ></textarea>
          </div>
        </div>
      </div>

      <!-- Document Upload Card -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <h2 class="text-xl font-heading font-semibold text-[var(--gcore-text)] mb-4">
          Residency Document
        </h2>
        <div class="space-y-4">
          <div>
            <label hlmLabel for="document" class="mb-2 block">
              Upload Document (PDF, JPG, PNG - Max 10MB) <span class="text-red-500">*</span>
            </label>
            <input
              #fileInput
              type="file"
              id="document"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onFileSelected($event)"
              class="block w-full text-sm text-gray-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-md file:border-0
                file:text-sm file:font-semibold
                file:bg-[var(--gcore-primary)] file:text-white
                hover:file:bg-[var(--gcore-primary)]/90
                cursor-pointer"
            />
            @if (selectedFileName()) {
              <p class="text-xs text-gray-600 mt-2 flex items-center">
                Selected: {{ selectedFileName() }}
                @if (uploading()) {
                  <span class="ml-2 text-[var(--gcore-primary)]">(Uploading...)</span>
                }
                @if (uploadedFileUrl() && !uploading()) {
                  <span class="ml-2 text-green-600">✓ Uploaded</span>
                  <button
                    type="button"
                    (click)="removeFile()"
                    class="ml-2 text-red-500 hover:text-red-700 text-xs underline"
                  >
                    Remove
                  </button>
                }
              </p>
            }
          </div>
          <div class="text-xs text-gray-500 space-y-1">
            <p class="font-medium text-gray-600">Accepted documents (must be dated within the last 3 months):</p>
            <ul class="list-disc list-inside space-y-0.5 ml-2">
              <li>Utility bill (electricity, water, gas, internet)</li>
              <li>Bank statement</li>
              <li>Government-issued residence certificate</li>
              <li>Tax document or official correspondence</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Consent Card -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <h2 class="text-xl font-heading font-semibold text-[var(--gcore-text)] mb-4">
          Consent
        </h2>
        <div class="space-y-4">
          <label class="flex items-start cursor-pointer">
            <input
              type="checkbox"
              [(ngModel)]="marketingConsent"
              name="marketingConsent"
              class="w-4 h-4 mt-0.5 text-[var(--gcore-primary)] border-gray-300 rounded focus:ring-[var(--gcore-primary)]"
            />
            <span class="ml-2 text-sm text-gray-700">
              I'd like to receive MineGNK updates on product news, blog articles, and other related information
            </span>
          </label>

          <div class="text-xs text-gray-600 leading-relaxed">
            By submitting this form, you acknowledge that you have read and understood our
            <a href="/privacy-policy" target="_blank" class="text-[var(--gcore-primary)] hover:underline">
              Privacy Policy
            </a>
            and agree to the processing of your personal data for KYC verification purposes.
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-end">
        <button
          hlmBtn
          type="submit"
          [disabled]="!canSubmit()"
          class="bg-[var(--gcore-primary)] hover:bg-[var(--gcore-primary)]/90 text-white px-8 py-2"
        >
          @if (loading()) {
            <span class="flex items-center gap-2">
              <div class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
              Submitting...
            </span>
          } @else {
            Submit KYC Verification
          }
        </button>
      </div>
    </form>
  </div>
</div>
